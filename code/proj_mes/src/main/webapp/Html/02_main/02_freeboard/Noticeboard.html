<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공지 사항</title>
    <!-- Inter 폰트 및 Tailwind CSS CDN -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 0;
        }

        /* 드롭다운 메뉴 애니메이션 */
        .group:hover .subList {
            display: flex !important;
        }

        .subList {
            display: none !important;
            flex-direction: column;
            min-width: 150px;
            z-index: 9999;
            background-color: #4b5563;
        }

        .header-bg {
            background-color: #002a40;
        }

        .nav-bg {
            background-color: #003751;
        }

        .mainList,
        #noticeContent,
        #boardContent {
            cursor: pointer;
        }

        .mainList li:hover {
            background-color: #3b82f6;
        }

        .hidden-section {
            display: none;
        }

        .pagination span {
            min-width: 32px;
            text-align: center;
        }
        
        /* Added to prevent layout jumping */
        #view-content {
            min-height: 20rem; 
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800">
    <!-- 헤더 섹션 -->
    <header class="header-bg text-white p-4 shadow-lg flex justify-between items-center z-50 relative">
        <div class="flex items-center space-x-2">
            <img src="https://i.postimg.cc/qMsq73hD/icon.png" class="w-10" alt="회사 로고">
            <h3 class="text-xl font-bold">J2P4</h3>
        </div>
        <div class="flex items-center space-x-4 sm:space-x-8">
            <div class="search cursor-pointer">
                <img src="https://i.postimg.cc/9QcMwQym/magnifier-white.png" class="w-6 sm:w-7" alt="검색용 아이콘">
            </div>
            <div class="logout text-sm sm:text-base cursor-pointer hover:underline">
                로그아웃
            </div>
            <div class="myIcon relative">
                <a href="javascript:void(0);" id="myIconBtn">
                    <img src="https://i.postimg.cc/zfVqTbvr/user.png" class="w-8 sm:w-9 rounded-full bg-white"
                        alt="마이페이지 아이콘">
                </a>
            </div>
        </div>
    </header>

    <!-- 메인 내비게이션 -->
    <nav class="nav-bg text-white py-2 shadow-inner z-40 relative">
        <ul class="mainList flex flex-wrap justify-center text-sm sm:text-base">
            <li class="relative px-2 sm:px-4 py-2 rounded-md">기준 관리</li>
            <li class="relative px-2 sm:px-4 py-2 rounded-md">공정 관리</li>
            <li class="relative px-2 sm:px-4 py-2 rounded-md">BOM 관리</li>
            <li class="relative px-2 sm:px-4 py-2 rounded-md">발주 관리</li>
            <li class="relative px-2 sm:px-4 py-2 rounded-md">재고 관리</li>
            <li class="relative px-2 sm:px-4 py-2 rounded-md">생산 관리</li>
            <li class="relative px-2 sm:px-4 py-2 rounded-md">품질 관리</li>
            <li class="relative px-2 sm:px-4 py-2 rounded-md">품목 관리</li>
        </ul>
    </nav>

    <!-- 공지 사항 목록 섹션 -->
    <div id="list-section" class="p-4 sm:p-8 max-w-7xl mx-auto">
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-6">자유게시판</h2>

        <!-- Search Area -->
        <div class="flex flex-col md:flex-row md:items-center justify-end md:space-x-4 mb-4">
            <div class="flex items-center space-x-2 w-full md:w-auto">
                <label for="search-select" class="text-gray-600 font-medium whitespace-nowrap">검색조건</label>
                <select id="search-select"
                    class="flex-grow p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="title">제목</option>
                    <option value="content">내용</option>
                </select>
            </div>
            <div class="flex items-center space-x-2 mt-2 md:mt-0 w-full md:w-auto">
                <input type="text" id="search-input" placeholder="검색할 내용을 입력하세요"
                    class="flex-grow p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button id="search-button"
                    class="px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700 transition duration-300">검색</button>
            </div>
        </div>

        <!-- Table -->
        <div class="overflow-x-auto">
            <table class="w-full text-sm text-left text-gray-700 rounded-lg overflow-hidden shadow-md">
                <thead class="text-xs text-gray-900 uppercase bg-gray-200">
                    <tr>
                        <th scope="col" class="py-3 px-6 text-center">유형</th>
                        <th scope="col" class="py-3 px-6">제목</th>
                        <th scope="col" class="py-3 px-6 text-center hidden md:table-cell">담당부서</th>
                        <th scope="col" class="py-3 px-6 text-center hidden md:table-cell">등록일</th>
                        <th scope="col" class="py-3 px-6 text-center">조회수</th>
                    </tr>
                </thead>
                <tbody id="post-table-body">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination flex justify-center items-center space-x-2 py-4 mt-2">
            <!-- Pagination spans will be added by JavaScript -->
        </div>

        <!-- Write Button -->
        <div class="flex justify-end mt-4">
            <button id="write-button"
                class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-lg hover:bg-blue-700 transition duration-300">
                글쓰기
            </button>
        </div>
    </div>

    <!-- 게시글 작성 섹션 (hidden by default) -->
    <div id="write-section" class="hidden-section p-4 sm:p-8 max-w-7xl mx-auto">
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-6">새 글 작성</h2>
        <div class="bg-white p-6 rounded-md shadow-md">
            <div class="mb-4">
                <label for="post-type" class="block text-gray-700 font-medium mb-2">유형</label>
                <select id="post-type"
                    class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option>[자유]</option>
                   
                </select>
            </div>
            <div class="mb-4">
                <label for="post-title" class="block text-gray-700 font-medium mb-2">제목</label>
                <input type="text" id="post-title"
                    class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div class="mb-4">
                <label for="post-dept" class="block text-gray-700 font-medium mb-2">담당부서</label>
                <input type="text" id="post-dept"
                    class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div class="mb-4">
                <label for="post-content" class="block text-gray-700 font-medium mb-2">내용</label>
                <textarea id="post-content" rows="10"
                    class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            </div>
            <div class="flex justify-end space-x-4">
                <button id="cancel-button"
                    class="px-6 py-2 bg-gray-400 text-white font-semibold rounded-md hover:bg-gray-500 transition duration-300">취소</button>
                <button id="save-button"
                    class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition duration-300">등록</button>
            </div>
        </div>
    </div>

    <!-- 게시글 보기 섹션 (hidden by default) -->
    <div id="view-section" class="hidden-section p-4 sm:p-8 max-w-7xl mx-auto">
        <div class="bg-white p-6 rounded-md shadow-md">
            <div class="border-b-2 border-gray-200 pb-4 mb-4">
                <h2 id="view-title" class="text-xl sm:text-2xl font-bold text-gray-900 mb-2"></h2>
                <div class="text-sm text-gray-500 flex justify-between items-center">
                    <span id="view-dept"></span>
                    <span id="view-date"></span>
                </div>
            </div>
            <div id="view-content" class="text-gray-700 leading-relaxed whitespace-pre-wrap"></div>
            <div class="flex justify-end mt-6 space-x-2">
                <!-- 목록으로 버튼을 가장 앞에 배치 -->
                <button id="back-button"
                    class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition duration-300">목록으로</button>
                <!-- 이전 글/다음 글 버튼 -->
                <button id="prev-button"
                    class="px-4 py-2 bg-gray-400 text-white font-semibold rounded-md transition duration-300 cursor-not-allowed">이전 글</button>
                <button id="next-button"
                    class="px-4 py-2 bg-gray-400 text-white font-semibold rounded-md transition duration-300 cursor-not-allowed">다음 글</button>
            </div>
        </div>
    </div>

    <script>
        // 게시글 데이터 배열 (예시)
        const posts = [
            { "id": 1, "type": "[자유]", "title": "오늘 출근길에 무지개 봄", "dept": "생산관리팀", "date": "2024-12-13", "views": 13, "content": "출근길에 무지게 봤어요 ㅎㅎ\n\n너무 예쁘던데요?! "},
            { "id": 2, "type": "[자유]", "title": "체육대회 후기 공유합니다", "dept": "시설관리팀", "date": "2024-12-13", "views": 13, "content": "체육대회 후기 공유합니다.\n\n너무 재밌었어요!!\n\n다음에 다른분들도 참여하셨으면 좋겠네요~ "},
            { "id": 3, "type": "[자유]", "title": "워크숍 후기 남겨요~", "dept": "안전보건팀", "date": "2024-12-13", "views": 24, "content": "팀원들과 함께 보낸 1박 2일, 웃음이 끊이질 않던 시간이었어요!\n\n다음엔 더 많은 분들이 함께하면 좋겠어요~\n\n다들 강추입니다!\n\n원크숍 덕분에 다시 에너지 충천 완료입니다!" },
            { "id": 4, "type": "[자유]", "title": "휴게실 에어컨 너무 세요", "dept": "IT운영팀", "date": "2024-12-13", "views": 24, "content": "에어컨 바람이 너무 직방이라 오래 앉아있기 힘들어요\n\n너무 추워서 잠깐만 있어도 추위를 느낍니다\n\n온도를 조금만 올려주시면 좋을 것 같아요" },
            { "id": 5, "type": "[자유]", "title": "사내 프로젝트 도와주실 분 구합니다", "dept": "기획팀", "date": "2024-12-12", "views": 35, "content": "도와주실 분 찾습니다.\n\n안녕하세요! 요즘 진행 중인 사내 프로젝트에 도움이 절실해서 이렇게 손들고 글 남깁니다.\n-편하게 이메일로 연락 주세요 :) " },
            { "id": 6, "type": "[자유]", "title": "요즘 스마트폰 개조에 빠졌어요", "dept": "IT 운영팀", "date": "2024-12-11", "views": 41, "content": "요즘 퇴근하고 나면 스마트폰 개조에 푹 빠져있습니다\n\n안 쓰는 구형 안드로이드 폰을 커스텀 롬으로 바꾸고, 배터리도 교체해봤는데.. 이게 생각보다 너무 재밌더라구요!\n\n혹시 비슷한 거 해보신 분 계시면 팁 공유도 환영입니다!" },
            { "id": 7, "type": "[자유]", "title": "2층 휴게실에서 휴대폰 주우신 분 계신가요?", "dept": "품질관리팀", "date": "2024-12-10", "views": 55, "content": "2024-12-9 오후 2시쯤, 2층 휴게실 소파근처에서 제 휴대폰을 두고 온 것 같습니다.\n\n 검정 갤럭시 S22 모델이고, 파란색 실리콘 케이스가 씌여있습니다.\n\n혹시 주우신 분이나 보신 분 계시면, 010-****-****로 연락 부탁드리겠습니다." },
            { "id": 8, "type": "[자유]", "title": "회사 근처 맛집 추천 받아요!", "dept": "영업팀", "date": "2024-12-09", "views": 68, "content": "안녕하세요~ 요즘 점심 메뉴가 너무 돌고 돌아서...\n\n회사 근처 맛집 추천 좀 받아보고자 글 남깁니다.\n\n힌식/분식/덮밥류 위주, 혼밥 가능하면 더 좋아요!" },
            { "id": 9, "type": "[자유]", "title": "공장 입구에서 카드 주웠습니다", "dept": "생산기술팀", "date": "2024-12-08", "views": 72, "content": "안녕하세요. 오늘 (2024년 12월 8일)공장입구 쪽에서 출입 카드를 주웠습니다.\n\n현재 생산기술팀 사무실에 보관 중이며, 본인 확인 후 수령 부탁드립니다." },
            { "id": 10, "type": "[자유]", "title": "액정 불량률 줄이는 팁 공유합니다", "dept": "품질관리팀", "date": "2024-12-07", "views": 81, "content": "최근 팀내에게 액정 불량률이 살짝 높아져서 작업 방식을 점검을 하던 중, 간단한 조치로 개선된 부분이 있어 공유드립니다.\n\n조립전에 장비 표면 닦기로 인해 미세먼지 재부착 방지가 되었습니다. \n\n 적용 2주 후, 같은 공정내 불량률이 약 15% 감소했습니다." },
            { "id": 11, "type": "[자유]", "title": "이마트24 신상 음료 후기", "dept": "재무회계팀", "date": "2024-12-06", "views": 90, "content": "오늘 점심 먹고 들른 이마트24에서 신상 발견! '말차초코 크림 라떼' (한정판이라고 써있었어요)\n\n 첫 맛은 말차인데 끝 맛은 거의 초코우유 느낌\n재구매 의사 : 반반!" },
            { "id": 12, "type": "[자유]", "title": "오늘 액정 불량률 0% 기록!", "dept": "생산기술팀", "date": "2024-12-05", "views": 105, "content": "오늘 액정 불량률 0% 기록 달성!\n\n하루 동안 공정 불량 없이 모두가 집중해서 작업해주신덕분에 좋은 결과를 냈습니다.\n\n함께해 주신 모든 분들 정말 감사합니다." },
            { "id": 13, "type": "[자유]", "title": "신제품 회의 때 있었던 재미있는 일", "dept": "자재관리팀", "date": "2024-12-04", "views": 110, "content": "어제 신제품 회의 중에 정말 웃긴 일이 있었어요.\n\n신제품 아이디어를 쏟아내던 중, 팀장님이 이번엔 진짜 대박아이템 나올겁니다!라며 자신있게 말씀하셨는데, 갑자기 옆에서 누군가가 그럼 저도 대박 맞나요? 장난쳐서 분위기가 빵 터졌답니다.\n\n덕분에 긴장됐던 회의실 분위기가 한층 풀리고, 다들 아이디어도 활발하게 나왔어요!" },
            { "id": 14, "type": "[자유]", "title": "라인 속도 조절 팁 공유해요", "dept": "IT운영팀", "date": "2024-12-03", "views": 122, "content": "시스템 안정화를 위해 서버 긴급 패치 작업을 실시합니다.\n\n작업 시간: 2024-12-03 23:00 ~ 24:00" },
            { "id": 15, "type": "[자유]", "title": "클린룸에서 생긴 에피소드", "dept": "생산기술팀", "date": "2024-12-02", "views": 130, "content": "얼마 전 클린룸에서 있었던 일입니다.\n\n작업 준비 중에 복장 착용 절차를 잊고 모자를 제대로 안 썼는데, 한 동료가 바람이 너무 세서 모자가 날아가겠어요! 라고 하면서 웃음을 터뜨렸죠. \n 모두 순간 긴장이 풀리면서 분위기가 부드러워졌고, 덕분에 다시 한 번 클린룸 복장 규칙을 꼼꼼히 체크하는 계기가 됐답니다.\n\n클린룸 안에서도 이렇게 소소한 웃음이 있다는 걸 알게된 하루였어요!" },
            { "id": 16, "type": "[자유]", "title": "액정 검사 때 이런 점 주의해요~", "dept": "생산기술팀", "date": "2024-12-01", "views": 145, "content": "요즘 액정 검사하면서 이런 불량들 자주 나오는 것 같아서 공유 드려요~\n\n혹시 검사할 때 참고하시면 도움이 될 것 같아요\n다들 오늘도 안전하고 불량 없는 하루 되세요 감사합니다~!" },
            { "id": 17, "type": "[자유]", "title": "이번 주 회의 요약 공유드립니다", "dept": "자재관리팀", "date": "2024-11-30", "views": 150, "content": "이번 주 회의에서 나온 액정검사 꿀팁 요약드립니다~\n\n다 같이 보면 좋은 회의 내용 공유해요!" },
            { "id": 18, "type": "[자유]", "title": "이번에 도입된 장비 써보신 분?", "dept": "자재관리팀", "date": "2024-11-29", "views": 162, "content": "이번에 도입된 장비, 써보신 분 계신가요?\n\n새로 들어온 장비 사용해보신 분 후기 궁금합니다" },
            { "id": 19, "type": "[자유]", "title": "납기일 앞두고 다들 고생 많으십니다", "dept": "IT보안팀", "date": "2024-11-28", "views": 178, "content": "요즘 납기 일정 맞추느라 다들 바쁘시죠?\n\n조금만 더 힘내서 이번 주 마무리 잘 해봐요!" },
            { "id": 20, "type": "[자유]", "title": "액정 재단기 유지보수 꿀팁", "dept": "품질관리팀", "date": "2024-11-27", "views": 185, "content": "요즘 재단기 쪽에서 소소한 고장이 자주 나서, 제가 평소에 관리 하면서 느낀 유지보수 팁 공유드려요.\n\n센서 주변 이물 청소눈 무조건! - 인식 오류 줄이려면 필수 \n\n혹시 다른 분들도 장비 관리 팁 있으시면 댓글로 알려주세요~ 작은 습관 하나가 장비 수명을 6개월 늘릴 수도 있습니다" },
            { "id": 21, "type": "[자유]", "title": "3층 커피머신 진짜 바뀌었네요 ㅋㅋ", "dept": "마케팅팀", "date": "2024-11-26", "views": 191, "content": "출근해서 잠결에 커피 뽑으러 갔는데, 기계가 싹 바뀌었더라고요~\n\n저는 오늘 따뜻한 아메리카노 먹어봤는데, 예전보단 덜 밍밍하고 꽤 괜찮았어요\n혹시 다른 분들도 새 커피머신 써보셨나요?\n\n추천할 만한 메뉴나 꿀조합 있으시면 공유해주세요~" },
            { "id": 22, "type": "[자유]", "title": "점신 같이 드실 분~?", "dept": "재무회계팀", "date": "2024-11-25", "views": 204, "content": "점심 같이 드실 분 계신가요~?\n\n 제가 맛있는 덮밥집 알고 있습니다!\n혹시 괜찮으시다면 2층 휴게실에서 모여서 다같이 덮밥 먹으러가요!" },
            { "id": 23, "type": "[지유]", "title": "이번 달 MVP는 누구~?", "dept": "경영관리팀", "date": "2024-11-24", "views": 213, "content": "슬슬 이번 달 MVP 발표할 떄가 된 것 같은데요~ 야근하며 마감 마추신 홍길동님? 불량 줄이느라 고생한 생산기술팀?\n\nMVP든 아니든, 모두가 주인공 이십니다~!" },
            { "id": 24, "type": "[자유]", "title": "다들 출근길 얼마나 걸려요?", "dept": "생산기술팀", "date": "2024-11-23", "views": 220, "content": "다들 출근길 얼마나 걸리시나요~?\n\n저는 보통 집에서 회사까지 1시간 정도 걸립니다.ㅎㅎ\n다른 분들은 얼마나 걸리는지 궁금하네요!" },
            { "id": 25, "type": "[자유]", "title": "회식 메뉴 튜표해요", "dept": "인사팀", "date": "2024-11-22", "views": 234, "content": "드디어 회식 날짜가 잡혔습니다~\n\n다들 부담 없이 한 표씩 주세요~ 어떤 메뉴가 되든 재밌게 즐겨요!" },
            { "id": 26, "type": "[자유]", "title": "이거 우리 사원증 디자인 어때요?", "dept": "시설관리팀", "date": "2024-11-21", "views": 240, "content": "이번에 새롭게 바꿔본 사원증입니다!\n\n깔끔하면서도 우리 회사 이미지를 살린 느낌으로 만들어봤어요!" },
            { "id": 27, "type": "[자유]", "title": "인쇄 오류 때문에 생긴 웃픈 일", "dept": "생산기술팀", "date": "2024-11-20", "views": 251, "content": "오늘 인쇄 작업하다가 갑자기...이번에 급하게 문서 뽑는데 인쇄기가 난리를 쳤습니다 ㅋㅋㅋ\n\n인쇄 전에는 꼭 프린터 상태 체크, 미리보기 확인 필수라는 교훈을 얻었습니다." },
            { "id": 28, "type": "[자유]", "title": "인스타에서 들은 명언 공유합니다", "dept": "품질관리팀", "date": "2024-11-19", "views": 265, "content": "인스타에서 우연히 본 명언 한 줄 공유합니다!\n\n성공은 최선을 다한 작은 노력들의 반복이다.\n우리도 매일 조금씩 힘내서 좋은 결과 만들었으면 좋겠네요!" },
            { "id": 29, "type": "[자유]", "title": "이직 생각 중인 친구 조언 구해요", "dept": "IT운영팀", "date": "2024-11-18", "views": 272, "content": "안녕하세요, 여러분! 제가 아는 친구가 최근 이직을 진지하게 고민중인요, 업무 만족도나 커리어 성장에 대해 고민이 많다고 합니다.\n\n비슷한 경험 있으신 분들께 이직 준비 팁이나 조언, 주의할 점 등을 듣고 싶어요!" },
            { "id": 30, "type": "[자유]", "title": "야근할 때 음악 추천 받아요", "dept": "기획팀", "date": "2024-11-17", "views": 288, "content": "야근할 때 음악 추천 받아요\n\n야근할 때 어떤 노래를 들으면 좋을까요\n저는 HONNE의 3AM을 추천합니다" },
            { "id": 31, "type": "[자유]", "title": "유막 제거 꿀팁 공유합니다", "dept": "자재관리팀", "date": "2024-11-16", "views": 301, "content": "유막 때문에 화면이 흐릿하거나 터치가 잘 안 될 때가 있죠?\n\n제가 직접 써본 방법 중 효과 좋았던 꿀팁 공유합니다!\n\n저는 세정제를 쓰는데, 부드러운 극세사 천에 적셔서 살살 닦으면 깔끔하게 제거돼요." },
            { "id": 32, "type": "[자유]", "title": "액정 스크래치 줄이는 작업법", "dept": "생산기술팀", "date": "2024-11-15", "views": 310, "content": "액정 작업시 가장 신경 쓰이는게 바로 스크래치죠?\n\n저도 여러 시행착오 끝에 스크래치 최소화하는 방법을 터득했어요!" },
            { "id": 33, "type": "[자유]", "title": "피로 회복에 좋은 스트레칭 모음", "dept": "자재관리팀", "date": "2024-11-14", "views": 325, "content": "납품처의 사정으로 인해 원자재 입고가 지연되고 있습니다.\n\n생산 일정에 차질 없도록 조치 바랍니다." },
            { "id": 34, "type": "[자유]", "title": "사내 시스템 단축키 정리해봤어요", "dept": "생산기술팀", "date": "2024-11-13", "views": 331, "content": "업무할 때 시간을 아끼기 위해 사내 시스템 주요 단축키를 정리해봤어요!\n\nCtrl+Z는 언제나 구세주입니다! 단축키로 스마트하게 일해봅시다! 모두 화이팅~" },
            { "id": 35, "type": "[자유]", "title": "신입 분들을 위한 부서 용어 정리", "dept": "인사팀", "date": "2024-11-12", "views": 340, "content": "신입 분들이 빠르게 적응할 수 있도록 자주 쓰는 부서 용어를 정리해 봤어요!\n\n처음에는 어려워도 천천히 익히면 금방 적응할 수 있습니다!\n\n함꼐 성장해 나가요!" },
            { "id": 36, "type": "[자유]", "title": "사내 헬스장 시간표 알려드려요", "dept": "총무팀", "date": "2024-11-11", "views": 354, "content": "사내 헬스장 시간표 알려드려요\n\n자세한 내용은 시간표 공지사항을 확인해 주세요." },
            { "id": 37, "type": "[자유]", "title": "실수 줄이기 위한 작업 전 체크리스트", "dept": "생산기술팀", "date": "2024-11-10", "views": 366, "content": "안녕하세요 여러분~ 요즘 바쁘다 보니 작은 실수가 종종 생기는데요, 자도 그렇고 다들 실수 없이 깔끔하게 일하려면 작업 전에 꼭 한번 씩 확인해봤으면 좋겠습니다\n\n작업지시서, 매뉴얼 꼼꼼히 읽었나요?\n\n이런 기본만 챙겨도 생각보다 실수가 훨씬 줄어들더라고요!" },
            { "id": 39, "type": "[안내]", "title": "방진복 관리 이렇게 해보세요~", "dept": "안전보건팀", "date": "2024-11-08", "views": 382, "content": "정기 건강검진을 아래 기간 내에 신청해 주시기 바랍니다.\n\n- 신청 기간: 2024-11-15까지\n- 신청 방법: 사내 시스템 온라인 신청" },
            { "id": 40, "type": "[긴급]", "title": "근처 세차장 가성비 후기", "dept": "시설관리팀", "date": "2024-11-07", "views": 390, "content": "오늘 오전에 발생한 화재 경보 오작동에 대해 안내드립니다.\n\n- 원인: 시스템 오류\n- 조치: 즉시 정상화 완료" },
            { "id": 41, "type": "[경영]", "title": "첫 월급타고 부모님 선물 드렸어요", "dept": "기획팀", "date": "2024-11-06", "views": 401, "content": "최신 경쟁사 동향 분석 보고서입니다.\n\n- 보고서 내용: 시장 점유율, 신제품 동향\n\n기획팀에 방문하여 열람 가능합니다." },
            { "id": 42, "type": "[안내]", "title": "오늘 아침 출근길에 무지개 봤어요!", "dept": "총무팀", "date": "2024-11-05", "views": 415, "content": "사내 도서관에 신규 도서가 입고되었습니다.\n\n- 목록: 게시판에서 확인" },
            { "id": 43, "type": "[공유]", "title": "주말에 등산 다녀왔어요~ 사진 공유!", "dept": "생산기술팀", "date": "2024-11-04", "views": 420, "content": "친환경 생산 공법 도입으로 폐기물 배출량을 30% 감소시켰습니다.\n\n모두의 노력에 감사드립니다." },
            { "id": 44, "type": "[기술]", "title": "점심에 먹은 김치찌개 맛집 공유", "dept": "연구개발팀", "date": "2024-11-03", "views": 435, "content": "진행 중인 특허 출원 상황을 공유합니다.\n\n- 예상 등록 시기: 2025년 3월" },
            { "id": 45, "type": "[안내]", "title": "우리 강아지가 TV 광고에 나왔어요", "dept": "인사팀", "date": "2024-11-02", "views": 444, "content": "장기 근속자에 대한 포상 신청을 받습니다.\n\n- 신청 대상: 5년, 10년, 15년 이상 근속자\n- 신청 기간: 2024-11-10까지" },
            { "id": 46, "type": "[긴급]", "title": "액정이 아니라 내 마음이 깨질 뻔...", "dept": "안전보건팀", "date": "2024-11-01", "views": 450, "content": "화재 발생에 대비한 긴급 소방 훈련을 실시합니다.\n\n- 일시: 2024-11-05 14:00\n- 대피 장소: 본사 주차장" },
            { "id": 47, "type": "[경영]", "title": "부서 회식 후기 공유합니다!", "dept": "재무회계팀", "date": "2024-10-31", "views": 465, "content": "2024년 3분기 재무 성과를 발표합니다.\n\n- 매출: 100억원 달성" },
            { "id": 48, "type": "[공유]", "title": "독서모임 같이 하실 분 계신가요?", "dept": "마케팅팀", "date": "2024-10-30", "views": 472, "content": "최근 진행된 고객 만족도 조사 결과를 공유합니다.\n\n- 만족도: 90% 이상" },
            { "id": 49, "type": "[기술]", "title": "새로 산 휴대폰 개봉기", "dept": "생산기술팀", "date": "2024-10-29", "views": 481, "content": "주요 생산 설비에 대한 정기 유지보수 계획입니다.\n\n- 대상: 라인1, 라인2\n- 기간: 2024-11-01 ~ 2024-11-03" },
            { "id": 50, "type": "[안내]", "title": "이번 달 목표는 운동 10회입니다!", "dept": "기획팀", "date": "2024-10-28", "views": 490, "content": "2025년도 예산 편성 지침을 안내드립니다.\n\n각 부서는 지침에 따라 예산안을 제출해 주세요." },
            { "id": 51, "type": "[긴급]", "title": "정전기 방지 팁 공유해요", "dept": "IT운영팀", "date": "2024-10-27", "views": 500, "content": "네트워크 장애가 발생하여 긴급 점검을 실시합니다.\n\n일부 시스템 접속이 원활하지 않을 수 있습니다." },
            { "id": 52, "type": "[경영]", "title": "검사 기준 변경도니 거 다들 아셨나요?", "dept": "경영관리팀", "date": "2024-10-26", "views": 511, "content": "정기 주주총회 개최를 안내드립니다.\n\n- 일시: 2024-11-15 10:00" },
            { "id": 53, "type": "[기술]", "title": "작업 중 불편한 점 건의해봅니다", "dept": "연구개발팀", "date": "2024-10-25", "views": 520, "content": "생산 효율성 증대를 위해 새로운 생산 공정을 도입합니다.\n\n- 도입 시기: 2025년 2월" },
            { "id": 54, "type": "[공유]", "title": "이번 주 불량 원인 분석 자료 공유합니다", "dept": "인사팀", "date": "2024-10-24", "views": 535, "content": "2024년 부서별 목표 달성 현황을 공유합니다.\n\n높은 목표 달성률을 보여준 모든 부서에 감사드립니다." },
            { "id": 55, "type": "[안내]", "title": "초정밀 라인 근무 팁 있으면 알려주세요", "dept": "총무팀", "date": "2024-10-23", "views": 540, "content": "사내 규정이 일부 개정되어 안내드립니다.\n\n개정된 규정은 사내 게시판에서 확인 가능합니다." },
            { "id": 56, "type": "[긴급]", "title": "요즘 라인B 분위기 너무 좋네요", "dept": "시설관리팀", "date": "2024-10-22", "views": 551, "content": "다가오는 태풍에 대비하여 시설물 긴급 점검을 실시합니다.\n\n- 점검 기간: 2024-10-22 ~ 2024-10-23" },
            { "id": 57, "type": "[경영]", "title": "우리 회사에도 익명 칭찬 게시판 어때요?", "dept": "마케팅팀", "date": "2024-10-21", "views": 560, "content": "최신 시장 분석 리포트입니다.\n\n- 주요 내용: 최신 트렌드, 소비자 동향" },
            { "id": 58, "type": "[기술]", "title": "점심시간 보드게임 같이 하실 분~?", "dept": "생산관리팀", "date": "2024-10-20", "views": 575, "content": "생산성 향상을 위한 직원 제안을 공모합니다.\n\n- 기간: 2024-11-15까지\n- 포상: 우수 제안자에게 포상금 지급" },
            { "id": 59, "type": "[안내]", "title": "출근할 때 듣는 플레이리스트 공유합니다", "dept": "재무회계팀", "date": "2024-10-19", "views": 580, "content": "분기별 정기 회식비 정산 절차를 안내드립니다.\n\n- 제출 기한: 2024-10-31까지" },
            { "id": 60, "type": "[공유]", "title": "첫 출근했던 날 기억나시나요?", "dept": "인사팀", "date": "2024-10-18", "views": 592, "content": "2024년 3분기 우수 사원이 선정되었습니다.\n\n- 우수 사원: 김민준 사원 (생산관리팀)\n\n축하드립니다!" }
        ];

        // 초기 상태 변수들
        let visiblePosts = [...posts];
        const postsPerPage = 10;
        let currentPage = 1;
        let currentPostId = null;

        // 섹션 보이기/숨기기 함수
        function showSection(sectionId) {
            document.getElementById('list-section').classList.add('hidden-section');
            document.getElementById('write-section').classList.add('hidden-section');
            document.getElementById('view-section').classList.add('hidden-section');
            document.getElementById(sectionId).classList.remove('hidden-section');
        }

        // 테이블 렌더링 함수
        function renderTable() {
            const tbody = document.getElementById('post-table-body');
            tbody.innerHTML = "";
            const start = (currentPage - 1) * postsPerPage;
            const end = start + postsPerPage;
            const pagePosts = visiblePosts.slice(start, end);

            pagePosts.forEach(post => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-gray-50 transition duration-300 border-b";
                tr.innerHTML = `
                    <td class="py-3 px-6 text-center text-xs md:text-sm font-semibold">${post.type}</td>
                    <td class="py-3 px-6 text-left text-xs md:text-sm">
                        <a href="#" class="post-title-link hover:underline hover:text-blue-600" data-post-id="${post.id}">${post.title}</a>
                    </td>
                    <td class="py-3 px-6 text-center text-xs md:text-sm hidden md:table-cell">${post.dept}</td>
                    <td class="py-3 px-6 text-center text-xs md:text-sm hidden md:table-cell">${post.date}</td>
                    <td class="py-3 px-6 text-center text-xs md:text-sm">${post.views}</td>
                `;
                tbody.appendChild(tr);
            });
            updatePagination();
            addPostTitleListeners();
        }

        // 페이지네이션 업데이트 함수
        function updatePagination() {
            const pagination = document.querySelector('.pagination');
            pagination.innerHTML = "";
            const totalPages = Math.ceil(visiblePosts.length / postsPerPage);

            for (let i = 1; i <= totalPages; i++) {
                const span = document.createElement('span');
                span.textContent = i;
                span.className = `cursor-pointer px-3 py-1 rounded-md transition duration-300 ${i === currentPage ? 'bg-blue-600 text-white font-bold' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`;
                span.addEventListener("click", () => {
                    currentPage = i;
                    renderTable();
                });
                pagination.appendChild(span);
            }
        }

        // 특정 게시글 내용을 보여주는 함수
        function showPostContent(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                // 현재 게시글 ID 업데이트
                currentPostId = postId;
                // 조회수 증가
                post.views++;

                // 게시글 내용 렌더링
                document.getElementById('view-title').textContent = post.title;
                document.getElementById('view-dept').textContent = `담당부서: ${post.dept}`;
                document.getElementById('view-date').textContent = `등록일: ${post.date} | 조회수: ${post.views}`;
                document.getElementById('view-content').textContent = post.content;

                // 이전/다음 버튼 상태 업데이트
                updateNavigationButtons();

                showSection('view-section');
                renderTable(); // 조회수 업데이트를 위해 목록 테이블도 다시 렌더링
            }
        }

        // 이전/다음 버튼 상태 업데이트 함수
        function updateNavigationButtons() {
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            const sortedPosts = posts.sort((a, b) => b.id - a.id); // 최신 글이 앞에 오도록 정렬
            const currentPostIndex = sortedPosts.findIndex(p => p.id === currentPostId);

            // 이전 글이 있으면 버튼 활성화, 없으면 비활성화
            if (currentPostIndex < sortedPosts.length - 1) {
                prevButton.disabled = false;
                prevButton.classList.remove('bg-gray-400', 'cursor-not-allowed');
                prevButton.classList.add('bg-blue-600', 'hover:bg-blue-700', 'text-white');
            } else {
                prevButton.disabled = true;
                prevButton.classList.add('bg-gray-400', 'cursor-not-allowed', 'text-white');
                prevButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
            }

            // 다음 글이 있으면 버튼 활성화, 없으면 비활성화
            if (currentPostIndex > 0) {
                nextButton.disabled = false;
                nextButton.classList.remove('bg-gray-400', 'cursor-not-allowed');
                nextButton.classList.add('bg-blue-600', 'hover:bg-blue-700', 'text-white');
            } else {
                nextButton.disabled = true;
                nextButton.classList.add('bg-gray-400', 'cursor-not-allowed', 'text-white');
                nextButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
            }
        }

        // 게시글 제목 링크에 이벤트 리스너 추가
        function addPostTitleListeners() {
            document.querySelectorAll('.post-title-link').forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const postId = parseInt(this.dataset.postId);
                    showPostContent(postId);
                });
            });
        }

        // 검색 버튼 이벤트 리스너
        document.getElementById('search-button').addEventListener('click', function () {
            const keyword = document.getElementById('search-input').value.trim().toLowerCase();
            const criteria = document.getElementById('search-select').value;
            visiblePosts = posts.filter(post => {
                const titleMatch = post.title.toLowerCase().includes(keyword);
                const contentMatch = post.content.toLowerCase().includes(keyword);

                if (criteria === "title") {
                    return titleMatch;
                } else if (criteria === "content") {
                    return contentMatch;
                }
                // Both title and content
                return titleMatch || contentMatch;
            });
            currentPage = 1;
            renderTable();
        });

        // 글쓰기 버튼 이벤트 리스너
        document.getElementById('write-button').addEventListener('click', function () {
            showSection('write-section');
        });

        // 등록 버튼 이벤트 리스너
        document.getElementById('save-button').addEventListener('click', function () {
            const postType = document.getElementById('post-type').value;
            const postTitle = document.getElementById('post-title').value.trim();
            const postDept = document.getElementById('post-dept').value.trim();
            const postContent = document.getElementById('post-content').value.trim();

            if (!postTitle || !postContent) {
                console.log("제목과 내용을 모두 입력해주세요.");
                return;
            }

            // 현재 게시글 ID 중 가장 큰 값을 찾아 새로운 ID 생성
            const maxId = posts.reduce((max, post) => Math.max(max, post.id), 0);
            const newPost = {
                id: maxId + 1,
                type: postType,
                title: postTitle,
                dept: postDept || "작성자",
                date: new Date().toISOString().slice(0, 10),
                views: 0,
                content: postContent
            };

            posts.unshift(newPost); // 새 글을 맨 앞에 추가
            visiblePosts = [...posts]; // 가시적 게시글 목록 업데이트
            currentPage = 1; // 첫 페이지로 이동
            renderTable(); // 테이블 다시 렌더링
            showSection('list-section'); // 목록 섹션으로 돌아가기

            // 입력 필드 초기화
            document.getElementById('post-type').value = "[안내]";
            document.getElementById('post-title').value = "";
            document.getElementById('post-dept').value = "";
            document.getElementById('post-content').value = "";
        });

        // 취소 버튼 이벤트 리스너
        document.getElementById('cancel-button').addEventListener('click', function () {
            showSection('list-section');
        });

        // 목록으로 버튼 이벤트 리스너
        document.getElementById('back-button').addEventListener('click', function () {
            showSection('list-section');
        });

        // 이전 글 버튼 이벤트 리스너
        document.getElementById('prev-button').addEventListener('click', function () {
            const sortedPosts = posts.sort((a, b) => b.id - a.id); // 최신 글이 앞에 오도록 정렬
            const currentPostIndex = sortedPosts.findIndex(p => p.id === currentPostId);
            if (currentPostIndex < sortedPosts.length - 1) {
                const prevPostId = sortedPosts[currentPostIndex + 1].id;
                showPostContent(prevPostId);
            }
        });

        // 다음 글 버튼 이벤트 리스너
        document.getElementById('next-button').addEventListener('click', function () {
            const sortedPosts = posts.sort((a, b) => b.id - a.id); // 최신 글이 앞에 오도록 정렬
            const currentPostIndex = sortedPosts.findIndex(p => p.id === currentPostId);
            if (currentPostIndex > 0) {
                const nextPostId = sortedPosts[currentPostIndex - 1].id;
                showPostContent(nextPostId);
            }
        });

        // 초기 렌더링
        window.onload = function () {
            renderTable();
        };

    </script>

</body>

</html>