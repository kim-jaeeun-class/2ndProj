<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>자유게시판</title>
  <style>
    body {
      font-family: '맑은 고딕', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 40px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border: 1px solid #ccc;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .board-title {
      font-size: 24px;
      font-weight: bold;
      margin: 0;
    }

    .post-info {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 10px;
      background-color: #f7f7f7;
    }

    .post-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .post-meta {
      font-size: 13px;
      color: #555;
    }

    .editor-toolbar {
      margin-bottom: 10px;
      border: 1px solid #ccc;
      background: #e9e9e9;
      padding: 8px 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .editor-toolbar button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
      padding: 5px 10px;
      border-radius: 4px;
      transition: background-color 0.2s ease;
    }

    .editor-toolbar button:hover {
      background-color: #d0d0d0;
    }

    .post-content {
      border: 1px solid #ccc;
      background-color: #f2f2f2;
      min-height: 300px;
      margin-bottom: 30px;
      padding: 10px;
      font-size: 15px;
      resize: vertical;
      width: 100%;
    }

    .file-upload {
      margin-bottom: 30px;
    }

    .file-upload label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
      font-weight: bold;
    }

    .file-upload input[type="file"] {
      width: 100%;
    }

    .button-group {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .btn {
      padding: 8px 16px;
      background-color: #333;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .btn:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-top">
      <h1 class="board-title">자유게시판</h1>
    </div>

    <div class="post-info">
      <div class="post-title">[자유] : </div>
      <div class="post-meta">작성자: 고현지 | 작성 시간: 2024-12-15 17:30</div>
    </div>

    <!-- ✅ 도구 모음 -->
    <div class="editor-toolbar">
      <button type="button" id="insertImageBtn">사진</button>
      <button type="button" id="insertScheduleBtn">일정</button>

      <select id="fontSelect">
        <option value="">기본서체</option>
        <option value="Gulim">굴림</option>
        <option value="Malgun Gothic">맑은 고딕</option>
        <option value="Dotum">돋움</option>
        <option value="Arial">Arial</option>
        <option value="Courier New">Courier New</option>
      </select>

      <select id="fontSizeSelect">
        <option value="">글자크기</option>
        <option value="1">1 (매우 작음)</option>
        <option value="2">2</option>
        <option value="3">3 (기본)</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7 (가장 큼)</option>
      </select>

      <button type="button" id="addTableBtn">표</button>
      <button type="button" id="deleteTableBtn">표 삭제</button>
    </div>

    <!-- ✅ 본문 입력 영역 -->
    <div class="post-content" contenteditable="true" id="editor">
      
    </div>

    <div class="file-upload">
      <label for="file">첨부파일</label>
      <input type="file" id="file" />
    </div>

   <div class="button-group">
  <a href="Noticeboardnext.html" class="btn">등록</a>
</div>

  <script>
(() => {
  const editor = document.getElementById("editor");
  editor.contentEditable = "true"; // 항상 수정 가능

  let selectedTable = null;

  // 표 삽입
  document.getElementById("addTableBtn").addEventListener("click", () => {
    const tableHTML = `
      <table border="1" style="width: 100%; margin-top: 10px; border-collapse: collapse;">
        <tr><th>항목</th><th>내용</th></tr>
        <tr><td>예시1</td><td>내용1</td></tr>
        <tr><td>예시2</td><td>내용2</td></tr>
      </table>
    `;
    editor.insertAdjacentHTML('beforeend', tableHTML);
  });

  // 표 선택 & 강조
  editor.addEventListener("click", (e) => {
    const clickedTable = e.target.closest("table");
    if (clickedTable) {
      if (selectedTable && selectedTable !== clickedTable) {
        selectedTable.style.border = "1px solid black";
      }
      selectedTable = clickedTable;
      selectedTable.style.border = "2px solid red";
    } else if (selectedTable) {
      selectedTable.style.border = "1px solid black";
      selectedTable = null;
    }
  });

  // 표 삭제
  document.getElementById("deleteTableBtn").addEventListener("click", () => {
    if (selectedTable) {
      selectedTable.remove();
      selectedTable = null;
    } else {
      alert("삭제할 표를 클릭해 선택하세요.");
    }
  });

  // 이미지 삽입
  const fileInput = document.createElement('input');
  fileInput.type = 'file';
  fileInput.accept = 'image/*';
  fileInput.style.display = 'none';
  document.body.appendChild(fileInput);

  document.getElementById("insertImageBtn").addEventListener("click", () => fileInput.click());

  fileInput.addEventListener('change', () => {
    const file = fileInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = e => {
        document.execCommand('insertImage', false, e.target.result);
      };
      reader.readAsDataURL(file);
    }
    fileInput.value = '';
  });

  // 일정 삽입
  document.getElementById("insertScheduleBtn").addEventListener("click", () => {
    const dateInput = document.createElement('input');
    dateInput.type = 'date';
    Object.assign(dateInput.style, {
      position: 'fixed',
      zIndex: '10000',
      fontSize: '16px'
    });

    const btnRect = insertScheduleBtn.getBoundingClientRect();
    dateInput.style.top = `${btnRect.bottom + window.scrollY}px`;
    dateInput.style.left = `${btnRect.left + window.scrollX}px`;

    document.body.appendChild(dateInput);
    dateInput.focus();

    dateInput.addEventListener('change', () => {
      const selectedDate = dateInput.value;
      if (selectedDate) {
        const formatted = new Date(selectedDate).toLocaleDateString('ko-KR', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          weekday: 'short'
        });

        const selection = window.getSelection();
        if (!selection.rangeCount) return;
        const range = selection.getRangeAt(0);
        range.deleteContents();
        const textNode = document.createTextNode(`🗓️ ${formatted} `);
        range.insertNode(textNode);
        range.setStartAfter(textNode);
        selection.removeAllRanges();
        selection.addRange(range);
      }
      document.body.removeChild(dateInput);
    });
  });

  // 글꼴 변경
  document.getElementById("fontSelect").addEventListener("change", function () {
    if (this.value) {
      document.execCommand("fontName", false, this.value);
    }
    this.selectedIndex = 0;
  });

  // 글자 크기 변경
  document.getElementById("fontSizeSelect").addEventListener("change", function () {
    if (this.value) {
      document.execCommand("fontSize", false, this.value);
    }
    this.selectedIndex = 0;
  });
})();
  </script>
</body>
</html>