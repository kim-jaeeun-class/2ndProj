<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ììœ ê²Œì‹œíŒ</title>
  <style>
    body {
      font-family: 'ë§‘ì€ ê³ ë”•', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 40px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border: 1px solid #ccc;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .board-title {
      font-size: 24px;
      font-weight: bold;
      margin: 0;
    }

    .post-info {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 10px;
      background-color: #f7f7f7;
    }

    .post-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .post-meta {
      font-size: 13px;
      color: #555;
    }

    .editor-toolbar {
      margin-bottom: 10px;
      border: 1px solid #ccc;
      background: #e9e9e9;
      padding: 8px 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .editor-toolbar button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
      padding: 5px 10px;
      border-radius: 4px;
      transition: background-color 0.2s ease;
    }

    .editor-toolbar button:hover {
      background-color: #d0d0d0;
    }

    .post-content {
      border: 1px solid #ccc;
      background-color: #f2f2f2;
      min-height: 300px;
      margin-bottom: 30px;
      padding: 10px;
      font-size: 15px;
      resize: vertical;
      width: 100%;
    }

    .file-upload {
      margin-bottom: 30px;
    }

    .file-upload label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
      font-weight: bold;
    }

    .file-upload input[type="file"] {
      width: 100%;
    }

    .button-group {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .btn {
      padding: 8px 16px;
      background-color: #333;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .btn:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-top">
      <h1 class="board-title">ììœ ê²Œì‹œíŒ</h1>
    </div>

    <div class="post-info">
      <div class="post-title">[ììœ ] : </div>
      <div class="post-meta">ì‘ì„±ì: ê³ í˜„ì§€ | ì‘ì„± ì‹œê°„: 2024-12-15 17:30</div>
    </div>

    <!-- âœ… ë„êµ¬ ëª¨ìŒ -->
    <div class="editor-toolbar">
      <button type="button" id="insertImageBtn">ì‚¬ì§„</button>
      <button type="button" id="insertScheduleBtn">ì¼ì •</button>

      <select id="fontSelect">
        <option value="">ê¸°ë³¸ì„œì²´</option>
        <option value="Gulim">êµ´ë¦¼</option>
        <option value="Malgun Gothic">ë§‘ì€ ê³ ë”•</option>
        <option value="Dotum">ë‹ì›€</option>
        <option value="Arial">Arial</option>
        <option value="Courier New">Courier New</option>
      </select>

      <select id="fontSizeSelect">
        <option value="">ê¸€ìí¬ê¸°</option>
        <option value="1">1 (ë§¤ìš° ì‘ìŒ)</option>
        <option value="2">2</option>
        <option value="3">3 (ê¸°ë³¸)</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7 (ê°€ì¥ í¼)</option>
      </select>

      <button type="button" id="addTableBtn">í‘œ</button>
      <button type="button" id="deleteTableBtn">í‘œ ì‚­ì œ</button>
    </div>

    <!-- âœ… ë³¸ë¬¸ ì…ë ¥ ì˜ì—­ -->
    <div class="post-content" contenteditable="true" id="editor">
      
    </div>

    <div class="file-upload">
      <label for="file">ì²¨ë¶€íŒŒì¼</label>
      <input type="file" id="file" />
    </div>

   <div class="button-group">
  <a href="Noticeboardnext.html" class="btn">ë“±ë¡</a>
</div>

  <script>
(() => {
  const editor = document.getElementById("editor");
  editor.contentEditable = "true"; // í•­ìƒ ìˆ˜ì • ê°€ëŠ¥

  let selectedTable = null;

  // í‘œ ì‚½ì…
  document.getElementById("addTableBtn").addEventListener("click", () => {
    const tableHTML = `
      <table border="1" style="width: 100%; margin-top: 10px; border-collapse: collapse;">
        <tr><th>í•­ëª©</th><th>ë‚´ìš©</th></tr>
        <tr><td>ì˜ˆì‹œ1</td><td>ë‚´ìš©1</td></tr>
        <tr><td>ì˜ˆì‹œ2</td><td>ë‚´ìš©2</td></tr>
      </table>
    `;
    editor.insertAdjacentHTML('beforeend', tableHTML);
  });

  // í‘œ ì„ íƒ & ê°•ì¡°
  editor.addEventListener("click", (e) => {
    const clickedTable = e.target.closest("table");
    if (clickedTable) {
      if (selectedTable && selectedTable !== clickedTable) {
        selectedTable.style.border = "1px solid black";
      }
      selectedTable = clickedTable;
      selectedTable.style.border = "2px solid red";
    } else if (selectedTable) {
      selectedTable.style.border = "1px solid black";
      selectedTable = null;
    }
  });

  // í‘œ ì‚­ì œ
  document.getElementById("deleteTableBtn").addEventListener("click", () => {
    if (selectedTable) {
      selectedTable.remove();
      selectedTable = null;
    } else {
      alert("ì‚­ì œí•  í‘œë¥¼ í´ë¦­í•´ ì„ íƒí•˜ì„¸ìš”.");
    }
  });

  // ì´ë¯¸ì§€ ì‚½ì…
  const fileInput = document.createElement('input');
  fileInput.type = 'file';
  fileInput.accept = 'image/*';
  fileInput.style.display = 'none';
  document.body.appendChild(fileInput);

  document.getElementById("insertImageBtn").addEventListener("click", () => fileInput.click());

  fileInput.addEventListener('change', () => {
    const file = fileInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = e => {
        document.execCommand('insertImage', false, e.target.result);
      };
      reader.readAsDataURL(file);
    }
    fileInput.value = '';
  });

  // ì¼ì • ì‚½ì…
  document.getElementById("insertScheduleBtn").addEventListener("click", () => {
    const dateInput = document.createElement('input');
    dateInput.type = 'date';
    Object.assign(dateInput.style, {
      position: 'fixed',
      zIndex: '10000',
      fontSize: '16px'
    });

    const btnRect = insertScheduleBtn.getBoundingClientRect();
    dateInput.style.top = `${btnRect.bottom + window.scrollY}px`;
    dateInput.style.left = `${btnRect.left + window.scrollX}px`;

    document.body.appendChild(dateInput);
    dateInput.focus();

    dateInput.addEventListener('change', () => {
      const selectedDate = dateInput.value;
      if (selectedDate) {
        const formatted = new Date(selectedDate).toLocaleDateString('ko-KR', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          weekday: 'short'
        });

        const selection = window.getSelection();
        if (!selection.rangeCount) return;
        const range = selection.getRangeAt(0);
        range.deleteContents();
        const textNode = document.createTextNode(`ğŸ—“ï¸ ${formatted} `);
        range.insertNode(textNode);
        range.setStartAfter(textNode);
        selection.removeAllRanges();
        selection.addRange(range);
      }
      document.body.removeChild(dateInput);
    });
  });

  // ê¸€ê¼´ ë³€ê²½
  document.getElementById("fontSelect").addEventListener("change", function () {
    if (this.value) {
      document.execCommand("fontName", false, this.value);
    }
    this.selectedIndex = 0;
  });

  // ê¸€ì í¬ê¸° ë³€ê²½
  document.getElementById("fontSizeSelect").addEventListener("change", function () {
    if (this.value) {
      document.execCommand("fontSize", false, this.value);
    }
    this.selectedIndex = 0;
  });
})();
  </script>
</body>
</html>